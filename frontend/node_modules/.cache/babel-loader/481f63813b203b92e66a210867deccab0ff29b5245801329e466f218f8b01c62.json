{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MSI\\\\Videos\\\\Employee-Register-App\\\\frontend\\\\src\\\\components\\\\auth\\\\OAuthCallback.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from '../ui/LoadingSpinner';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OAuthCallback = () => {\n  _s();\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const {\n    setAuthData\n  } = useAuth();\n  useEffect(() => {\n    const handleOAuthCallback = async () => {\n      try {\n        const accessToken = searchParams.get('accessToken');\n        const refreshToken = searchParams.get('refreshToken');\n        const userParam = searchParams.get('user');\n        const error = searchParams.get('error');\n        if (error) {\n          let errorMessage = 'Authentication failed';\n          switch (error) {\n            case 'oauth_failed':\n              errorMessage = 'OAuth authentication failed';\n              break;\n            case 'oauth_error':\n              errorMessage = 'An error occurred during authentication';\n              break;\n            default:\n              errorMessage = 'Authentication failed';\n          }\n          toast.error(errorMessage);\n          navigate('/login');\n          return;\n        }\n        if (!accessToken || !refreshToken || !userParam) {\n          toast.error('Invalid authentication response');\n          navigate('/login');\n          return;\n        }\n\n        // Parse user data\n        const user = JSON.parse(decodeURIComponent(userParam));\n\n        // Store tokens\n        localStorage.setItem('accessToken', accessToken);\n        localStorage.setItem('refreshToken', refreshToken);\n\n        // Update auth context\n        if (setAuthData) {\n          setAuthData({\n            user,\n            accessToken,\n            refreshToken\n          });\n        }\n        toast.success(`Welcome back, ${user.name}!`);\n\n        // Redirect to dashboard\n        navigate('/dashboard');\n      } catch (error) {\n        console.error('OAuth callback error:', error);\n        toast.error('Failed to complete authentication');\n        navigate('/login');\n      }\n    };\n    handleOAuthCallback();\n  }, [searchParams, navigate, setAuthData]);\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    className: \"min-h-screen flex items-center justify-center bg-gray-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(LoadingSpinner, {\n        size: \"lg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.p, {\n        initial: {\n          opacity: 0,\n          y: 10\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          delay: 0.5\n        },\n        className: \"mt-4 text-gray-600\",\n        children: \"Completing authentication...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(OAuthCallback, \"eCwICjgFtE5a17dl1D4H2VgyCx8=\", false, function () {\n  return [useNavigate, useSearchParams, useAuth];\n});\n_c = OAuthCallback;\nexport default OAuthCallback;\nvar _c;\n$RefreshReg$(_c, \"OAuthCallback\");","map":{"version":3,"names":["React","useEffect","useNavigate","useSearchParams","motion","useAuth","LoadingSpinner","toast","jsxDEV","_jsxDEV","OAuthCallback","_s","navigate","searchParams","setAuthData","handleOAuthCallback","accessToken","get","refreshToken","userParam","error","errorMessage","user","JSON","parse","decodeURIComponent","localStorage","setItem","success","name","console","div","initial","opacity","animate","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","p","y","transition","delay","_c","$RefreshReg$"],"sources":["C:/Users/MSI/Videos/Employee-Register-App/frontend/src/components/auth/OAuthCallback.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport LoadingSpinner from '../ui/LoadingSpinner';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst OAuthCallback = () => {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const { setAuthData } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const handleOAuthCallback = async () => {\r\n      try {\r\n        const accessToken = searchParams.get('accessToken');\r\n        const refreshToken = searchParams.get('refreshToken');\r\n        const userParam = searchParams.get('user');\r\n        const error = searchParams.get('error');\r\n\r\n        if (error) {\r\n          let errorMessage = 'Authentication failed';\r\n          switch (error) {\r\n            case 'oauth_failed':\r\n              errorMessage = 'OAuth authentication failed';\r\n              break;\r\n            case 'oauth_error':\r\n              errorMessage = 'An error occurred during authentication';\r\n              break;\r\n            default:\r\n              errorMessage = 'Authentication failed';\r\n          }\r\n          \r\n          toast.error(errorMessage);\r\n          navigate('/login');\r\n          return;\r\n        }\r\n\r\n        if (!accessToken || !refreshToken || !userParam) {\r\n          toast.error('Invalid authentication response');\r\n          navigate('/login');\r\n          return;\r\n        }\r\n\r\n        // Parse user data\r\n        const user = JSON.parse(decodeURIComponent(userParam));\r\n\r\n        // Store tokens\r\n        localStorage.setItem('accessToken', accessToken);\r\n        localStorage.setItem('refreshToken', refreshToken);\r\n\r\n        // Update auth context\r\n        if (setAuthData) {\r\n          setAuthData({ user, accessToken, refreshToken });\r\n        }\r\n\r\n        toast.success(`Welcome back, ${user.name}!`);\r\n        \r\n        // Redirect to dashboard\r\n        navigate('/dashboard');\r\n        \r\n      } catch (error) {\r\n        console.error('OAuth callback error:', error);\r\n        toast.error('Failed to complete authentication');\r\n        navigate('/login');\r\n      }\r\n    };\r\n\r\n    handleOAuthCallback();\r\n  }, [searchParams, navigate, setAuthData]);\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      className=\"min-h-screen flex items-center justify-center bg-gray-50\"\r\n    >\r\n      <div className=\"text-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n        <motion.p\r\n          initial={{ opacity: 0, y: 10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.5 }}\r\n          className=\"mt-4 text-gray-600\"\r\n        >\r\n          Completing authentication...\r\n        </motion.p>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default OAuthCallback;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}