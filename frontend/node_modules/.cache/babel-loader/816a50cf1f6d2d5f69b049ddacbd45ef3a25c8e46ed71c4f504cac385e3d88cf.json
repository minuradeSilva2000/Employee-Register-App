{"ast":null,"code":"import _objectSpread from\"C:/Users/MSI/Videos/Employee-Register-App/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\r\n * AuthContext - TypeScript Conversion\r\n * \r\n * CHANGES MADE:\r\n * 1. Added proper TypeScript interfaces for state, actions, and context\r\n * 2. Typed all function parameters and return values\r\n * 3. Created AuthState interface for reducer state\r\n * 4. Created AuthAction union type for all possible actions\r\n * 5. Typed reducer function with proper action types\r\n * 6. Added proper typing for context value\r\n * 7. Converted all functions to use TypeScript types\r\n * 8. Added proper error typing\r\n * \r\n * NO BEHAVIORAL CHANGES - All logic preserved exactly as-is\r\n */import React,{createContext,useContext,useReducer,useEffect}from'react';import{authAPI}from'../services/api';import toast from'react-hot-toast';// Extend Window interface for Google API\n// ==================== INTERFACES ====================\nimport{jsx as _jsx}from\"react/jsx-runtime\";// ==================== ACTION TYPES ====================\nconst AUTH_ACTIONS={LOGIN_START:'LOGIN_START',LOGIN_SUCCESS:'LOGIN_SUCCESS',LOGIN_FAILURE:'LOGIN_FAILURE',LOGOUT:'LOGOUT',REFRESH_TOKEN_START:'REFRESH_TOKEN_START',REFRESH_TOKEN_SUCCESS:'REFRESH_TOKEN_SUCCESS',REFRESH_TOKEN_FAILURE:'REFRESH_TOKEN_FAILURE',LOAD_USER_START:'LOAD_USER_START',LOAD_USER_SUCCESS:'LOAD_USER_SUCCESS',LOAD_USER_FAILURE:'LOAD_USER_FAILURE',CLEAR_ERROR:'CLEAR_ERROR',UPDATE_USER:'UPDATE_USER'};// Union type for all possible actions\n// ==================== INITIAL STATE ====================\nconst initialState={user:null,isAuthenticated:false,isLoading:true,error:null,permissions:[]};// ==================== REDUCER ====================\nconst authReducer=(state,action)=>{switch(action.type){case AUTH_ACTIONS.LOGIN_START:return _objectSpread(_objectSpread({},state),{},{isLoading:true,error:null});case AUTH_ACTIONS.LOGIN_SUCCESS:return _objectSpread(_objectSpread({},state),{},{user:action.payload.user,isAuthenticated:true,isLoading:false,error:null,permissions:action.payload.user.permissions||[]});case AUTH_ACTIONS.LOGIN_FAILURE:return _objectSpread(_objectSpread({},state),{},{user:null,isAuthenticated:false,isLoading:false,error:action.payload,permissions:[]});case AUTH_ACTIONS.LOGOUT:return _objectSpread(_objectSpread({},state),{},{user:null,isAuthenticated:false,isLoading:false,error:null,permissions:[]});case AUTH_ACTIONS.REFRESH_TOKEN_START:return _objectSpread(_objectSpread({},state),{},{isLoading:true});case AUTH_ACTIONS.REFRESH_TOKEN_SUCCESS:return _objectSpread(_objectSpread({},state),{},{user:action.payload.user,isAuthenticated:true,isLoading:false,error:null,permissions:action.payload.user.permissions||[]});case AUTH_ACTIONS.REFRESH_TOKEN_FAILURE:return _objectSpread(_objectSpread({},state),{},{user:null,isAuthenticated:false,isLoading:false,error:action.payload,permissions:[]});case AUTH_ACTIONS.LOAD_USER_START:return _objectSpread(_objectSpread({},state),{},{isLoading:true});case AUTH_ACTIONS.LOAD_USER_SUCCESS:return _objectSpread(_objectSpread({},state),{},{user:action.payload.user,isAuthenticated:true,isLoading:false,error:null,permissions:action.payload.user.permissions||[]});case AUTH_ACTIONS.LOAD_USER_FAILURE:return _objectSpread(_objectSpread({},state),{},{user:null,isAuthenticated:false,isLoading:false,error:action.payload,permissions:[]});case AUTH_ACTIONS.CLEAR_ERROR:return _objectSpread(_objectSpread({},state),{},{error:null});case AUTH_ACTIONS.UPDATE_USER:return _objectSpread(_objectSpread({},state),{},{user:state.user?_objectSpread(_objectSpread({},state.user),action.payload):null});default:return state;}};// ==================== CONTEXT ====================\nconst AuthContext=/*#__PURE__*/createContext(undefined);// ==================== PROVIDER ====================\nexport const AuthProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(authReducer,initialState);// Get tokens from localStorage\nconst getTokens=()=>{const accessToken=localStorage.getItem('accessToken');const refreshToken=localStorage.getItem('refreshToken');return{accessToken,refreshToken};};// Set tokens to localStorage\nconst setTokens=(accessToken,refreshToken)=>{localStorage.setItem('accessToken',accessToken);localStorage.setItem('refreshToken',refreshToken);};// Clear tokens from localStorage\nconst clearTokens=()=>{localStorage.removeItem('accessToken');localStorage.removeItem('refreshToken');};// Set auth data (for OAuth callbacks)\nconst setAuthData=_ref2=>{let{user,accessToken,refreshToken}=_ref2;setTokens(accessToken,refreshToken);dispatch({type:AUTH_ACTIONS.LOGIN_SUCCESS,payload:{user}});};// Google OAuth login\nconst loginWithGoogle=async googleData=>{try{dispatch({type:AUTH_ACTIONS.LOGIN_START});// Store access token in localStorage FIRST\nif(googleData.accessToken){localStorage.setItem('accessToken',googleData.accessToken);}// Store refresh token if available\nif(googleData.refreshToken){localStorage.setItem('refreshToken',googleData.refreshToken);}// Update state with user data AFTER tokens are stored\ndispatch({type:AUTH_ACTIONS.LOGIN_SUCCESS,payload:{user:googleData.user}});console.log('✅ Google login successful in AuthContext');// Return user data for navigation\nreturn{success:true,user:googleData.user};}catch(error){const errorMessage=error instanceof Error?error.message:'Google login failed';dispatch({type:AUTH_ACTIONS.LOGIN_FAILURE,payload:errorMessage});console.error('❌ Google login error in AuthContext:',errorMessage);return{success:false,error:errorMessage};}};// Login function with proper error handling\nconst login=async credentials=>{try{dispatch({type:AUTH_ACTIONS.LOGIN_START});const response=await authAPI.login(credentials);const data=response.data;if(data.success&&data.data){const{accessToken,refreshToken,user}=data.data;// Store tokens FIRST\nsetTokens(accessToken,refreshToken);// Update state AFTER tokens are stored\ndispatch({type:AUTH_ACTIONS.LOGIN_SUCCESS,payload:{user}});toast.success(\"Welcome back, \".concat(user.name,\"!\"));// Return user data for navigation\nreturn{success:true,user};}else{throw new Error(data.message||'Invalid credentials');}}catch(error){var _error$response,_error$response$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message||'Invalid credentials';dispatch({type:AUTH_ACTIONS.LOGIN_FAILURE,payload:errorMessage});console.error('Login failed:',errorMessage);return{success:false,error:errorMessage};}};// Logout function with complete session cleanup\nconst logout=async()=>{try{const{refreshToken}=getTokens();if(refreshToken){// Call logout API to invalidate refresh token\nawait authAPI.logout();}// Revoke Google session if user logged in with Google\nif(window.google&&window.google.accounts&&window.google.accounts.id){try{window.google.accounts.id.disableAutoSelect();console.log('✅ Google session revoked');}catch(error){console.warn('⚠️ Failed to revoke Google session:',error);}}}catch(error){console.error('Logout API error:',error);}finally{// Clear tokens and update state\nclearTokens();dispatch({type:AUTH_ACTIONS.LOGOUT});// Clear any cached data\nif(window.sessionStorage){window.sessionStorage.clear();}// Show success message\ntoast.success('Logged out successfully');// Force redirect to login page\nwindow.location.href='/login';}};// Refresh token function\nconst refreshToken=async()=>{try{const{refreshToken:token}=getTokens();if(!token){throw new Error('No refresh token available');}dispatch({type:AUTH_ACTIONS.REFRESH_TOKEN_START});const response=await authAPI.refreshToken({refreshToken:token});const data=response.data;if(data.success&&data.data){const{accessToken,user}=data.data;// Update access token\nlocalStorage.setItem('accessToken',accessToken);// Update state\ndispatch({type:AUTH_ACTIONS.REFRESH_TOKEN_SUCCESS,payload:{user}});return{success:true};}else{throw new Error(data.message||'Token refresh failed');}}catch(error){var _error$response2,_error$response2$data;const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message||'Token refresh failed';// Clear tokens and update state\nclearTokens();dispatch({type:AUTH_ACTIONS.REFRESH_TOKEN_FAILURE,payload:errorMessage});return{success:false,error:errorMessage};}};// Load user from token\nconst loadUser=async()=>{try{const{accessToken}=getTokens();if(!accessToken){throw new Error('No access token available');}dispatch({type:AUTH_ACTIONS.LOAD_USER_START});const response=await authAPI.verifyToken();const data=response.data;if(data.success&&data.data){dispatch({type:AUTH_ACTIONS.LOAD_USER_SUCCESS,payload:data.data});}else{throw new Error(data.message||'Token verification failed');}}catch(error){var _error$response3,_error$response3$data;const errorMessage=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||error.message||'Failed to load user';// Clear tokens and update state\nclearTokens();dispatch({type:AUTH_ACTIONS.LOAD_USER_FAILURE,payload:errorMessage});}};// Update user profile\nconst updateUser=userData=>{dispatch({type:AUTH_ACTIONS.UPDATE_USER,payload:userData});};// Clear error\nconst clearError=()=>{dispatch({type:AUTH_ACTIONS.CLEAR_ERROR});};// Check if user has specific permission\nconst hasPermission=permission=>{return state.permissions.includes(permission);};// Check if user has any of the specified permissions\nconst hasAnyPermission=permissions=>{return permissions.some(permission=>state.permissions.includes(permission));};// Check if user has all specified permissions\nconst hasAllPermissions=permissions=>{return permissions.every(permission=>state.permissions.includes(permission));};// Check if user has specific role\nconst hasRole=role=>{var _state$user;return((_state$user=state.user)===null||_state$user===void 0?void 0:_state$user.role)===role;};// Check if user has any of the specified roles\nconst hasAnyRole=roles=>{return state.user?roles.includes(state.user.role):false;};// Auto-logout on token expiry\nuseEffect(()=>{const{accessToken}=getTokens();if(accessToken){try{// Decode JWT token to check expiry\nconst tokenData=JSON.parse(atob(accessToken.split('.')[1]));const currentTime=Date.now()/1000;// Auto-refresh token 5 minutes before expiry\nconst timeUntilExpiry=tokenData.exp-currentTime;if(timeUntilExpiry>0&&timeUntilExpiry<300){refreshToken();}else if(timeUntilExpiry<=0){logout();}}catch(error){console.error('Token decode error:',error);logout();}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[state.isAuthenticated]);// Load user on app start\nuseEffect(()=>{const{accessToken}=getTokens();if(accessToken){loadUser();}else{dispatch({type:AUTH_ACTIONS.LOAD_USER_FAILURE,payload:'No token found'});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const value=_objectSpread(_objectSpread({},state),{},{// Actions\nlogin,loginWithGoogle,setAuthData,logout,refreshToken,loadUser,updateUser,clearError,// Permission helpers\nhasPermission,hasAnyPermission,hasAllPermissions,hasRole,hasAnyRole});return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};// ==================== CUSTOM HOOK ====================\nexport const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export default AuthContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","authAPI","toast","jsx","_jsx","AUTH_ACTIONS","LOGIN_START","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","REFRESH_TOKEN_START","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAILURE","LOAD_USER_START","LOAD_USER_SUCCESS","LOAD_USER_FAILURE","CLEAR_ERROR","UPDATE_USER","initialState","user","isAuthenticated","isLoading","error","permissions","authReducer","state","action","type","_objectSpread","payload","AuthContext","undefined","AuthProvider","_ref","children","dispatch","getTokens","accessToken","localStorage","getItem","refreshToken","setTokens","setItem","clearTokens","removeItem","setAuthData","_ref2","loginWithGoogle","googleData","console","log","success","errorMessage","Error","message","login","credentials","response","data","concat","name","_error$response","_error$response$data","logout","window","google","accounts","id","disableAutoSelect","warn","sessionStorage","clear","location","href","token","_error$response2","_error$response2$data","loadUser","verifyToken","_error$response3","_error$response3$data","updateUser","userData","clearError","hasPermission","permission","includes","hasAnyPermission","some","hasAllPermissions","every","hasRole","role","_state$user","hasAnyRole","roles","tokenData","JSON","parse","atob","split","currentTime","Date","now","timeUntilExpiry","exp","value","Provider","useAuth","context"],"sources":["C:/Users/MSI/Videos/Employee-Register-App/frontend/src/contexts/AuthContext.tsx"],"sourcesContent":["/**\r\n * AuthContext - TypeScript Conversion\r\n * \r\n * CHANGES MADE:\r\n * 1. Added proper TypeScript interfaces for state, actions, and context\r\n * 2. Typed all function parameters and return values\r\n * 3. Created AuthState interface for reducer state\r\n * 4. Created AuthAction union type for all possible actions\r\n * 5. Typed reducer function with proper action types\r\n * 6. Added proper typing for context value\r\n * 7. Converted all functions to use TypeScript types\r\n * 8. Added proper error typing\r\n * \r\n * NO BEHAVIORAL CHANGES - All logic preserved exactly as-is\r\n */\r\n\r\nimport React, { createContext, useContext, useReducer, useEffect, ReactNode } from 'react';\r\nimport { authAPI } from '../services/api';\r\nimport toast from 'react-hot-toast';\r\nimport { User, LoginCredentials, AuthResponse } from '../types';\r\n\r\n// Extend Window interface for Google API\r\ndeclare global {\r\n  interface Window {\r\n    google?: {\r\n      accounts?: {\r\n        id?: {\r\n          disableAutoSelect: () => void;\r\n        };\r\n      };\r\n    };\r\n  }\r\n}\r\n\r\n// ==================== INTERFACES ====================\r\n\r\ninterface AuthState {\r\n  user: User | null;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  permissions: string[];\r\n}\r\n\r\ninterface GoogleAuthData {\r\n  user: User;\r\n  accessToken: string;\r\n  refreshToken: string;\r\n}\r\n\r\ninterface LoginResult {\r\n  success: boolean;\r\n  user?: User;\r\n  error?: string;\r\n}\r\n\r\ninterface TokenRefreshResult {\r\n  success: boolean;\r\n  error?: string;\r\n}\r\n\r\ninterface AuthContextValue extends AuthState {\r\n  login: (credentials: LoginCredentials) => Promise<LoginResult>;\r\n  loginWithGoogle: (googleData: GoogleAuthData) => Promise<LoginResult>;\r\n  setAuthData: (data: GoogleAuthData) => void;\r\n  logout: () => Promise<void>;\r\n  refreshToken: () => Promise<TokenRefreshResult>;\r\n  loadUser: () => Promise<void>;\r\n  updateUser: (userData: Partial<User>) => void;\r\n  clearError: () => void;\r\n  hasPermission: (permission: string) => boolean;\r\n  hasAnyPermission: (permissions: string[]) => boolean;\r\n  hasAllPermissions: (permissions: string[]) => boolean;\r\n  hasRole: (role: string) => boolean;\r\n  hasAnyRole: (roles: string[]) => boolean;\r\n}\r\n\r\n// ==================== ACTION TYPES ====================\r\n\r\nconst AUTH_ACTIONS = {\r\n  LOGIN_START: 'LOGIN_START',\r\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS',\r\n  LOGIN_FAILURE: 'LOGIN_FAILURE',\r\n  LOGOUT: 'LOGOUT',\r\n  REFRESH_TOKEN_START: 'REFRESH_TOKEN_START',\r\n  REFRESH_TOKEN_SUCCESS: 'REFRESH_TOKEN_SUCCESS',\r\n  REFRESH_TOKEN_FAILURE: 'REFRESH_TOKEN_FAILURE',\r\n  LOAD_USER_START: 'LOAD_USER_START',\r\n  LOAD_USER_SUCCESS: 'LOAD_USER_SUCCESS',\r\n  LOAD_USER_FAILURE: 'LOAD_USER_FAILURE',\r\n  CLEAR_ERROR: 'CLEAR_ERROR',\r\n  UPDATE_USER: 'UPDATE_USER',\r\n} as const;\r\n\r\n// Union type for all possible actions\r\ntype AuthAction =\r\n  | { type: 'LOGIN_START' }\r\n  | { type: 'LOGIN_SUCCESS'; payload: { user: User } }\r\n  | { type: 'LOGIN_FAILURE'; payload: string }\r\n  | { type: 'LOGOUT' }\r\n  | { type: 'REFRESH_TOKEN_START' }\r\n  | { type: 'REFRESH_TOKEN_SUCCESS'; payload: { user: User } }\r\n  | { type: 'REFRESH_TOKEN_FAILURE'; payload: string }\r\n  | { type: 'LOAD_USER_START' }\r\n  | { type: 'LOAD_USER_SUCCESS'; payload: { user: User } }\r\n  | { type: 'LOAD_USER_FAILURE'; payload: string }\r\n  | { type: 'CLEAR_ERROR' }\r\n  | { type: 'UPDATE_USER'; payload: Partial<User> };\r\n\r\n// ==================== INITIAL STATE ====================\r\n\r\nconst initialState: AuthState = {\r\n  user: null,\r\n  isAuthenticated: false,\r\n  isLoading: true,\r\n  error: null,\r\n  permissions: [],\r\n};\r\n\r\n// ==================== REDUCER ====================\r\n\r\nconst authReducer = (state: AuthState, action: AuthAction): AuthState => {\r\n  switch (action.type) {\r\n    case AUTH_ACTIONS.LOGIN_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n        error: null,\r\n      };\r\n\r\n    case AUTH_ACTIONS.LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        isAuthenticated: true,\r\n        isLoading: false,\r\n        error: null,\r\n        permissions: action.payload.user.permissions || [],\r\n      };\r\n\r\n    case AUTH_ACTIONS.LOGIN_FAILURE:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: action.payload,\r\n        permissions: [],\r\n      };\r\n\r\n    case AUTH_ACTIONS.LOGOUT:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: null,\r\n        permissions: [],\r\n      };\r\n\r\n    case AUTH_ACTIONS.REFRESH_TOKEN_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n\r\n    case AUTH_ACTIONS.REFRESH_TOKEN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        isAuthenticated: true,\r\n        isLoading: false,\r\n        error: null,\r\n        permissions: action.payload.user.permissions || [],\r\n      };\r\n\r\n    case AUTH_ACTIONS.REFRESH_TOKEN_FAILURE:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: action.payload,\r\n        permissions: [],\r\n      };\r\n\r\n    case AUTH_ACTIONS.LOAD_USER_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n\r\n    case AUTH_ACTIONS.LOAD_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        isAuthenticated: true,\r\n        isLoading: false,\r\n        error: null,\r\n        permissions: action.payload.user.permissions || [],\r\n      };\r\n\r\n    case AUTH_ACTIONS.LOAD_USER_FAILURE:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        error: action.payload,\r\n        permissions: [],\r\n      };\r\n\r\n    case AUTH_ACTIONS.CLEAR_ERROR:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n      };\r\n\r\n    case AUTH_ACTIONS.UPDATE_USER:\r\n      return {\r\n        ...state,\r\n        user: state.user ? { ...state.user, ...action.payload } : null,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// ==================== CONTEXT ====================\r\n\r\nconst AuthContext = createContext<AuthContextValue | undefined>(undefined);\r\n\r\n// ==================== PROVIDER ====================\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n  // Get tokens from localStorage\r\n  const getTokens = (): { accessToken: string | null; refreshToken: string | null } => {\r\n    const accessToken = localStorage.getItem('accessToken');\r\n    const refreshToken = localStorage.getItem('refreshToken');\r\n    return { accessToken, refreshToken };\r\n  };\r\n\r\n  // Set tokens to localStorage\r\n  const setTokens = (accessToken: string, refreshToken: string): void => {\r\n    localStorage.setItem('accessToken', accessToken);\r\n    localStorage.setItem('refreshToken', refreshToken);\r\n  };\r\n\r\n  // Clear tokens from localStorage\r\n  const clearTokens = (): void => {\r\n    localStorage.removeItem('accessToken');\r\n    localStorage.removeItem('refreshToken');\r\n  };\r\n\r\n  // Set auth data (for OAuth callbacks)\r\n  const setAuthData = ({ user, accessToken, refreshToken }: GoogleAuthData): void => {\r\n    setTokens(accessToken, refreshToken);\r\n    dispatch({\r\n      type: AUTH_ACTIONS.LOGIN_SUCCESS,\r\n      payload: { user },\r\n    });\r\n  };\r\n\r\n  // Google OAuth login\r\n  const loginWithGoogle = async (googleData: GoogleAuthData): Promise<LoginResult> => {\r\n    try {\r\n      dispatch({ type: AUTH_ACTIONS.LOGIN_START });\r\n\r\n      // Store access token in localStorage FIRST\r\n      if (googleData.accessToken) {\r\n        localStorage.setItem('accessToken', googleData.accessToken);\r\n      }\r\n      \r\n      // Store refresh token if available\r\n      if (googleData.refreshToken) {\r\n        localStorage.setItem('refreshToken', googleData.refreshToken);\r\n      }\r\n      \r\n      // Update state with user data AFTER tokens are stored\r\n      dispatch({\r\n        type: AUTH_ACTIONS.LOGIN_SUCCESS,\r\n        payload: { user: googleData.user },\r\n      });\r\n\r\n      console.log('✅ Google login successful in AuthContext');\r\n      \r\n      // Return user data for navigation\r\n      return { success: true, user: googleData.user };\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : 'Google login failed';\r\n      \r\n      dispatch({\r\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\r\n        payload: errorMessage,\r\n      });\r\n\r\n      console.error('❌ Google login error in AuthContext:', errorMessage);\r\n      \r\n      return { success: false, error: errorMessage };\r\n    }\r\n  };\r\n\r\n  // Login function with proper error handling\r\n  const login = async (credentials: LoginCredentials): Promise<LoginResult> => {\r\n    try {\r\n      dispatch({ type: AUTH_ACTIONS.LOGIN_START });\r\n\r\n      const response = await authAPI.login(credentials);\r\n      const data: AuthResponse = response.data;\r\n      \r\n      if (data.success && data.data) {\r\n        const { accessToken, refreshToken, user } = data.data;\r\n        \r\n        // Store tokens FIRST\r\n        setTokens(accessToken, refreshToken);\r\n        \r\n        // Update state AFTER tokens are stored\r\n        dispatch({\r\n          type: AUTH_ACTIONS.LOGIN_SUCCESS,\r\n          payload: { user },\r\n        });\r\n\r\n        toast.success(`Welcome back, ${user.name}!`);\r\n        \r\n        // Return user data for navigation\r\n        return { success: true, user };\r\n      } else {\r\n        throw new Error(data.message || 'Invalid credentials');\r\n      }\r\n    } catch (error: any) {\r\n      const errorMessage = error.response?.data?.message || error.message || 'Invalid credentials';\r\n      \r\n      dispatch({\r\n        type: AUTH_ACTIONS.LOGIN_FAILURE,\r\n        payload: errorMessage,\r\n      });\r\n\r\n      console.error('Login failed:', errorMessage);\r\n      \r\n      return { success: false, error: errorMessage };\r\n    }\r\n  };\r\n\r\n  // Logout function with complete session cleanup\r\n  const logout = async (): Promise<void> => {\r\n    try {\r\n      const { refreshToken } = getTokens();\r\n      \r\n      if (refreshToken) {\r\n        // Call logout API to invalidate refresh token\r\n        await authAPI.logout();\r\n      }\r\n\r\n      // Revoke Google session if user logged in with Google\r\n      if (window.google && window.google.accounts && window.google.accounts.id) {\r\n        try {\r\n          window.google.accounts.id.disableAutoSelect();\r\n          console.log('✅ Google session revoked');\r\n        } catch (error) {\r\n          console.warn('⚠️ Failed to revoke Google session:', error);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Logout API error:', error);\r\n    } finally {\r\n      // Clear tokens and update state\r\n      clearTokens();\r\n      dispatch({ type: AUTH_ACTIONS.LOGOUT });\r\n      \r\n      // Clear any cached data\r\n      if (window.sessionStorage) {\r\n        window.sessionStorage.clear();\r\n      }\r\n      \r\n      // Show success message\r\n      toast.success('Logged out successfully');\r\n      \r\n      // Force redirect to login page\r\n      window.location.href = '/login';\r\n    }\r\n  };\r\n\r\n  // Refresh token function\r\n  const refreshToken = async (): Promise<TokenRefreshResult> => {\r\n    try {\r\n      const { refreshToken: token } = getTokens();\r\n      \r\n      if (!token) {\r\n        throw new Error('No refresh token available');\r\n      }\r\n\r\n      dispatch({ type: AUTH_ACTIONS.REFRESH_TOKEN_START });\r\n\r\n      const response = await authAPI.refreshToken({ refreshToken: token });\r\n      const data: AuthResponse = response.data;\r\n      \r\n      if (data.success && data.data) {\r\n        const { accessToken, user } = data.data;\r\n        \r\n        // Update access token\r\n        localStorage.setItem('accessToken', accessToken);\r\n        \r\n        // Update state\r\n        dispatch({\r\n          type: AUTH_ACTIONS.REFRESH_TOKEN_SUCCESS,\r\n          payload: { user },\r\n        });\r\n\r\n        return { success: true };\r\n      } else {\r\n        throw new Error(data.message || 'Token refresh failed');\r\n      }\r\n    } catch (error: any) {\r\n      const errorMessage = error.response?.data?.message || error.message || 'Token refresh failed';\r\n      \r\n      // Clear tokens and update state\r\n      clearTokens();\r\n      dispatch({\r\n        type: AUTH_ACTIONS.REFRESH_TOKEN_FAILURE,\r\n        payload: errorMessage,\r\n      });\r\n\r\n      return { success: false, error: errorMessage };\r\n    }\r\n  };\r\n\r\n  // Load user from token\r\n  const loadUser = async (): Promise<void> => {\r\n    try {\r\n      const { accessToken } = getTokens();\r\n      \r\n      if (!accessToken) {\r\n        throw new Error('No access token available');\r\n      }\r\n\r\n      dispatch({ type: AUTH_ACTIONS.LOAD_USER_START });\r\n\r\n      const response = await authAPI.verifyToken();\r\n      const data: AuthResponse = response.data;\r\n      \r\n      if (data.success && data.data) {\r\n        dispatch({\r\n          type: AUTH_ACTIONS.LOAD_USER_SUCCESS,\r\n          payload: data.data,\r\n        });\r\n      } else {\r\n        throw new Error(data.message || 'Token verification failed');\r\n      }\r\n    } catch (error: any) {\r\n      const errorMessage = error.response?.data?.message || error.message || 'Failed to load user';\r\n      \r\n      // Clear tokens and update state\r\n      clearTokens();\r\n      dispatch({\r\n        type: AUTH_ACTIONS.LOAD_USER_FAILURE,\r\n        payload: errorMessage,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Update user profile\r\n  const updateUser = (userData: Partial<User>): void => {\r\n    dispatch({\r\n      type: AUTH_ACTIONS.UPDATE_USER,\r\n      payload: userData,\r\n    });\r\n  };\r\n\r\n  // Clear error\r\n  const clearError = (): void => {\r\n    dispatch({ type: AUTH_ACTIONS.CLEAR_ERROR });\r\n  };\r\n\r\n  // Check if user has specific permission\r\n  const hasPermission = (permission: string): boolean => {\r\n    return state.permissions.includes(permission);\r\n  };\r\n\r\n  // Check if user has any of the specified permissions\r\n  const hasAnyPermission = (permissions: string[]): boolean => {\r\n    return permissions.some(permission => state.permissions.includes(permission));\r\n  };\r\n\r\n  // Check if user has all specified permissions\r\n  const hasAllPermissions = (permissions: string[]): boolean => {\r\n    return permissions.every(permission => state.permissions.includes(permission));\r\n  };\r\n\r\n  // Check if user has specific role\r\n  const hasRole = (role: string): boolean => {\r\n    return state.user?.role === role;\r\n  };\r\n\r\n  // Check if user has any of the specified roles\r\n  const hasAnyRole = (roles: string[]): boolean => {\r\n    return state.user ? roles.includes(state.user.role) : false;\r\n  };\r\n\r\n  // Auto-logout on token expiry\r\n  useEffect(() => {\r\n    const { accessToken } = getTokens();\r\n    \r\n    if (accessToken) {\r\n      try {\r\n        // Decode JWT token to check expiry\r\n        const tokenData = JSON.parse(atob(accessToken.split('.')[1]));\r\n        const currentTime = Date.now() / 1000;\r\n        \r\n        // Auto-refresh token 5 minutes before expiry\r\n        const timeUntilExpiry = tokenData.exp - currentTime;\r\n        \r\n        if (timeUntilExpiry > 0 && timeUntilExpiry < 300) {\r\n          refreshToken();\r\n        } else if (timeUntilExpiry <= 0) {\r\n          logout();\r\n        }\r\n      } catch (error) {\r\n        console.error('Token decode error:', error);\r\n        logout();\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [state.isAuthenticated]);\r\n\r\n  // Load user on app start\r\n  useEffect(() => {\r\n    const { accessToken } = getTokens();\r\n    \r\n    if (accessToken) {\r\n      loadUser();\r\n    } else {\r\n      dispatch({ type: AUTH_ACTIONS.LOAD_USER_FAILURE, payload: 'No token found' });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const value: AuthContextValue = {\r\n    // State\r\n    ...state,\r\n    \r\n    // Actions\r\n    login,\r\n    loginWithGoogle,\r\n    setAuthData,\r\n    logout,\r\n    refreshToken,\r\n    loadUser,\r\n    updateUser,\r\n    clearError,\r\n    \r\n    // Permission helpers\r\n    hasPermission,\r\n    hasAnyPermission,\r\n    hasAllPermissions,\r\n    hasRole,\r\n    hasAnyRole,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\n// ==================== CUSTOM HOOK ====================\r\n\r\nexport const useAuth = (): AuthContextValue => {\r\n  const context = useContext(AuthContext);\r\n  \r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  \r\n  return context;\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}